# ===================================
# 台股自選股智能分析系統 - 環境變量配置模板
# 複製此文件為 .env 並填入真實配置
# ===================================

# 自選股列表（逗號分隔，支持多市場代碼）
# 台股：2330.TW（台積電）、2317.TW（鴻海）、2454.TW（聯發科）
# 港股：0700.HK（騰訊）、9988.HK（阿里巴巴）
# A股：600519.SS（貴州茅台）、000001.SZ（平安銀行）
# 美股：AAPL（蘋果）、TSLA（特斯拉）
STOCK_LIST=2330.TW,2317.TW,2454.TW

# 數據源配置

# FinMind API Token（推薦，台股專用數據源）
# 註冊網址：https://finmindtrade.com/
# 優點：台股數據最詳細，支援籌碼面、基本面等進階數據
# 免費額度：未註冊 300次/小時，註冊後 600次/小時
FINMIND_TOKEN=your_finmind_token_here

# Tushare Pro Token（可選，A股數據源）
TUSHARE_TOKEN=your_tushare_token_here

# ===================================
# AI 模型配置（二選一，至少配置一個）
# ===================================
#
# 【方案一】使用 Gemini（推薦，有免費額度）
# 從 https://aistudio.google.com/ 獲取免費 API Key
# 留空或刪除此行則跳過 Gemini，直接使用方案二
#
GEMINI_API_KEY=
GEMINI_MODEL=gemini-3-flash-preview
GEMINI_MODEL_FALLBACK=gemini-2.5-flash
GEMINI_REQUEST_DELAY=2.0

# 【方案二】使用 OpenAI 兼容 API（支持多種國產模型）
# 如果不想用 Gemini，可以只配置下面三項（去掉註釋）
# 支持：OpenAI、DeepSeek、通義千問、Moonshot、智譜GLM 等
#
# ┌──────────────────────────────────────────────────────────────┐
# │ 配置規則：                                                    │
# │   OPENAI_API_KEY   = 必填，你的 API Key                      │
# │   OPENAI_BASE_URL  = 可選，第三方 API 地址（OpenAI官方可不填）│
# │   OPENAI_MODEL     = 可選，模型名稱（默認 gpt-4o-mini）       │
# └──────────────────────────────────────────────────────────────┘
#
# --- OpenAI 官方（只需填 Key）---
# OPENAI_API_KEY=sk-xxxxxxxxxxxxxxxx
#
# --- DeepSeek（國產，便宜好獲取）---
# OPENAI_API_KEY=sk-xxxxxxxxxxxxxxxx
# OPENAI_BASE_URL=https://api.deepseek.com/v1
# OPENAI_MODEL=deepseek-chat

# 搜索引擎配置（用於獲取股票新聞）
# Tavily API Keys（支持多個，逗號分隔）
TAVILY_API_KEYS=your_tavily_key_here
# SerpAPI Keys（支持多個，逗號分隔）
SERPAPI_API_KEYS=your_serpapi_key_here

# ===================================
# 通知渠道配置（可同時配置多個，全部推送）
# ===================================
#
# 【方式一】企業微信機器人
# 在企業微信群 -> 設置 -> 群機器人 -> 添加 -> 複製 Webhook 地址
#
# WECHAT_WEBHOOK_URL=https://qyapi.weixin.qq.com/cgi-bin/webhook/send?key=your_key_here
#
# 【方式二】飛書機器人
# 在飛書群 -> 設置 -> 群機器人 -> 添加機器人 -> 自定義機器人 -> 複製 Webhook 地址
#
# FEISHU_WEBHOOK_URL=https://open.feishu.cn/open-apis/bot/v2/hook/your_key_here
#
# 【方式三】Telegram 機器人（需同時配置兩項）
# 1. 在 Telegram 找 @BotFather -> /newbot -> 獲取 Bot Token
# 2. 獲取 Chat ID：發消息給 @userinfobot 或訪問 https://api.telegram.org/bot<token>/getUpdates
#
# TELEGRAM_BOT_TOKEN=123456789:ABCdefGHIjklMNOpqrsTUVwxyz
# TELEGRAM_CHAT_ID=123456789
#
# 【方式四】郵件推送（只需 2 項配置，SMTP 自動識別）
# 支持 QQ郵箱、163郵箱、Gmail、Outlook 等主流郵箱
# 1. 獲取授權碼（以QQ郵箱為例）：設置 -> 賬戶 -> POP3/SMTP服務 -> 開啟 -> 獲取授權碼
# 2. 填寫下面兩項即可：
#
# EMAIL_SENDER=your_email@qq.com
# EMAIL_PASSWORD=your_email_auth_code
# EMAIL_RECEIVERS=receiver@example.com  # 可選，留空則發給自己
#
# 【方式五】自定義 Webhook（支持多個，逗號分隔）
# 適用於：釘釘、Discord、Slack、Bark、自建服務等任意支持 POST JSON 的 Webhook
# 系統會自動識別常見服務並使用對應格式
#
# CUSTOM_WEBHOOK_URLS=https://oapi.dingtalk.com/robot/send?access_token=xxx,https://hooks.slack.com/services/xxx
# CUSTOM_WEBHOOK_BEARER_TOKEN=your_bearer_token  # 可選，用於需要認證的 Webhook (Header Authorization: Bearer <token>)
# 
# 【方式六】Pushover 配置
# 註冊Pushover賬號，並創建應用Token https://pushover.net/apps/build
# PUSHOVER_USER_KEY=your_user_key
# PUSHOVER_API_TOKEN=your_api_token
# 
# 【方式七】Discord 配置
# 支持兩種方式：Webhook（推薦，配置簡單）和 Bot API（權限高）
# 
# 方式1：Discord Webhook（推薦，無需 Bot 賬號）
# 在 Discord 頻道設置 -> 集成 -> Webhook -> 新建 Webhook -> 複製 URL
# DISCORD_WEBHOOK_URL=https://discord.com/api/webhooks/your_webhook_id/your_webhook_token
# 
# 方式2：Discord Bot API（需要 Bot 賬號和頻道 ID）
# 1. 創建 Bot：https://discord.com/developers/applications -> 新建應用 -> Bot -> 創建 Bot
# 2. 獲取 Bot Token：Bot 頁面 -> 重置 Token
# 3. 獲取頻道 ID：Discord 開啟開發者模式 -> 右鍵頻道 -> 複製 ID
# DISCORD_BOT_TOKEN=your_bot_token_here
# DISCORD_MAIN_CHANNEL_ID=your_channel_id_here
# 
# 【高級配置】消息長度限制（字節）
# 超過限制會自動分批發送，一般無需修改
# FEISHU_MAX_BYTES=20000    # 飛書限制約 20KB，默認 20000 字節
# WECHAT_MAX_BYTES=4000     # 企業微信限制 4096 字節，默認 4000 字節

# 應用 AppKey（與 Webhook 模式共用）
DINGTALK_APP_KEY=xxxx
# 應用 AppSecret（與 Webhook 模式共用）
DINGTALK_APP_SECRET=xxxx
# 啟用 Stream 模式
DINGTALK_STREAM_ENABLED=true

# 飛書應用機器人配置
FEISHU_APP_ID=xxxx
FEISHU_APP_SECRET=xxxx
# 啟用長連接模式
FEISHU_STREAM_ENABLED=true

# 數據庫路徑
DATABASE_PATH=./data/stock_analysis.db

# === 定時任務配置 ===
# 是否啟用定時任務（true/false）
SCHEDULE_ENABLED=false
# 每日執行時間（HH:MM 格式，24小時制）
SCHEDULE_TIME=18:00
# 是否啟用大盤覆盤（true/false）
MARKET_REVIEW_ENABLED=true

# 系統配置
# 日誌目錄
LOG_DIR=./logs
# 日誌級別（DEBUG/INFO/WARNING/ERROR）
LOG_LEVEL=INFO
# 最大併發線程數（建議保持低併發防封禁）
MAX_WORKERS=3
# 是否啟用調試日誌
DEBUG=false

# ===================================
# WebUI 配置（可選）
# ===================================
# 是否默認啟動 WebUI（true/false，默認 false）
WEBUI_ENABLED=false
# WebUI 監聽地址（默認 127.0.0.1；Docker/Compose 場景需要 0.0.0.0 才能從宿主機訪問端口映射）
WEBUI_HOST=127.0.0.1
# WebUI 監聽端口（默認 8000）
WEBUI_PORT=8000
