# ===================================
# A股自选股智能分析系统 - 环境变量配置模板
# 复制此文件为 .env 并填入真实配置
# ===================================

# 自选股列表（逗号分隔，支持沪深两市代码）
# 沪市：600xxx, 601xxx, 603xxx
# 深市：000xxx, 002xxx, 300xxx
STOCK_LIST=600519,300750,002594

# 选股模式：manual（手动列表）或 concept（概念板块自动选股）
# concept 模式会从概念板块中选择 Top N 板块，每个板块选 Top M 只股票
# STOCK_LIST_MODE=concept
# CONCEPT_BOARD_TOP_N=10
# CONCEPT_STOCKS_PER_BOARD=6

# 概念板块来源：auto（默认），ths（同花顺）
# CONCEPT_BOARD_SOURCE=ths

# Akshare/Efinance 禁用代理（本地调试用）
# AKSHARE_NO_PROXY=true

# 数据源配置
# Tushare Pro Token（可选，从 https://tushare.pro 获取）
TUSHARE_TOKEN=your_tushare_token_here

# ===================================
# AI 模型配置（二选一，至少配置一个）
# ===================================
#
# 【方案一】使用 Gemini（推荐，有免费额度）
# 从 https://aistudio.google.com/ 获取免费 API Key
# 留空或删除此行则跳过 Gemini，直接使用方案二
#
GEMINI_API_KEY=
GEMINI_MODEL=gemini-3-pro-preview
GEMINI_MODEL_FALLBACK=gemini-2.5-flash
GEMINI_REQUEST_DELAY=2.0

# 【方案二】使用 OpenAI 兼容 API（支持多种国产模型）
# 如果不想用 Gemini，可以只配置下面三项（去掉注释）
# 支持：OpenAI、DeepSeek、通义千问、Moonshot、智谱GLM 等
#
# ┌──────────────────────────────────────────────────────────────┐
# │ 配置规则：                                                    │
# │   OPENAI_API_KEY   = 必填，你的 API Key                      │
# │   OPENAI_BASE_URL  = 可选，第三方 API 地址（OpenAI官方可不填）│
# │   OPENAI_MODEL     = 可选，模型名称（默认 gpt-4o-mini）       │
# └──────────────────────────────────────────────────────────────┘
#
# --- OpenAI 官方（只需填 Key）---
# OPENAI_API_KEY=sk-xxxxxxxxxxxxxxxx
#
# --- DeepSeek（国产，便宜好获取）---
# OPENAI_API_KEY=sk-xxxxxxxxxxxxxxxx
# OPENAI_BASE_URL=https://api.deepseek.com/v1
# OPENAI_MODEL=deepseek-chat

# 搜索引擎配置（用于获取股票新闻）
# Tavily API Keys（支持多个，逗号分隔）
TAVILY_API_KEYS=your_tavily_key_here
# SerpAPI Keys（支持多个，逗号分隔）
SERPAPI_API_KEYS=your_serpapi_key_here

# ===================================
# 通知渠道配置（可同时配置多个，全部推送）
# ===================================
#
# 【方式一】企业微信机器人
# 在企业微信群 -> 设置 -> 群机器人 -> 添加 -> 复制 Webhook 地址
#
# WECHAT_WEBHOOK_URL=https://qyapi.weixin.qq.com/cgi-bin/webhook/send?key=your_key_here
#
# 【方式二】飞书机器人
# 在飞书群 -> 设置 -> 群机器人 -> 添加机器人 -> 自定义机器人 -> 复制 Webhook 地址
#
# FEISHU_WEBHOOK_URL=https://open.feishu.cn/open-apis/bot/v2/hook/your_key_here
#
# 【方式三】Telegram 机器人（需同时配置两项）
# 1. 在 Telegram 找 @BotFather -> /newbot -> 获取 Bot Token
# 2. 获取 Chat ID：发消息给 @userinfobot 或访问 https://api.telegram.org/bot<token>/getUpdates
#
# TELEGRAM_BOT_TOKEN=123456789:ABCdefGHIjklMNOpqrsTUVwxyz
# TELEGRAM_CHAT_ID=123456789
#
# 【方式四】邮件推送（只需 2 项配置，SMTP 自动识别）
# 支持 QQ邮箱、163邮箱、Gmail、Outlook 等主流邮箱
# 1. 获取授权码（以QQ邮箱为例）：设置 -> 账户 -> POP3/SMTP服务 -> 开启 -> 获取授权码
# 2. 填写下面两项即可：
#
# EMAIL_SENDER=your_email@qq.com
# EMAIL_PASSWORD=your_email_auth_code
# EMAIL_RECEIVERS=receiver@example.com  # 可选，留空则发给自己
#
# 【方式五】自定义 Webhook（支持多个，逗号分隔）
# 适用于：钉钉、Discord、Slack、Bark、自建服务等任意支持 POST JSON 的 Webhook
# 系统会自动识别常见服务并使用对应格式
#
# CUSTOM_WEBHOOK_URLS=https://oapi.dingtalk.com/robot/send?access_token=xxx,https://hooks.slack.com/services/xxx
# CUSTOM_WEBHOOK_BEARER_TOKEN=your_bearer_token  # 可选，用于需要认证的 Webhook (Header Authorization: Bearer <token>)
# 
# 【方式六】Pushover 配置
# 注册Pushover账号，并创建应用Token https://pushover.net/apps/build
# PUSHOVER_USER_KEY=your_user_key
# PUSHOVER_API_TOKEN=your_api_token
# 
# 【高级配置】消息长度限制（字节）
# 超过限制会自动分批发送，一般无需修改
# FEISHU_MAX_BYTES=20000    # 飞书限制约 20KB，默认 20000 字节
# WECHAT_MAX_BYTES=4000     # 企业微信限制 4096 字节，默认 4000 字节

# 数据库路径
DATABASE_PATH=./data/stock_analysis.db

# === 定时任务配置 ===
# 是否启用定时任务（true/false）
SCHEDULE_ENABLED=false
# 每日执行时间（HH:MM 格式，24小时制）
SCHEDULE_TIME=18:00
# 是否启用大盘复盘（true/false）
MARKET_REVIEW_ENABLED=true

# 系统配置
# 日志目录
LOG_DIR=./logs
# 日志级别（DEBUG/INFO/WARNING/ERROR）
LOG_LEVEL=INFO
# 最大并发线程数（建议保持低并发防封禁）
MAX_WORKERS=3
# 是否启用调试日志
DEBUG=false

# ===================================
# WebUI 配置（可选）
# ===================================
# 是否默认启动 WebUI（true/false，默认 false）
WEBUI_ENABLED=false
# WebUI 监听地址（默认 127.0.0.1，如需局域网访问请改为 0.0.0.0）
WEBUI_HOST=127.0.0.1
# WebUI 监听端口（默认 8000）
WEBUI_PORT=8000

# ===================================
# 沙里淘金筛选（Wyckoff Screeners）
# ===================================
# 是否启用（true/false）
WYCKOFF_ENABLED=false
# 战术：all / resisters / jumpers / anomalies / first_board
# 也可用中文：抗跌主力 / 突破临界 / 异常吸筹/出货 / 启动龙头
WYCKOFF_TACTIC=all
# 交易日数量
WYCKOFF_TRADING_DAYS=500

# 股票池：manual 或 board
WYCKOFF_POOL_MODE=board
# manual 模式下填写股票代码（逗号或空格分隔）
WYCKOFF_SYMBOLS=600519,000001
# board 模式：all/main/chinext/star/bse
# 支持多板块：main,chinext 或 main+chinext
WYCKOFF_BOARD=all
# board 模式数量上限
WYCKOFF_LIMIT_COUNT=500
# 起始偏移（用于分批跑）
WYCKOFF_OFFSET=0

# 结果排序与缓存
WYCKOFF_GROUP_POWER=true
WYCKOFF_USE_CACHE=true
WYCKOFF_RESULT_LIMIT=80
WYCKOFF_DEBUG=false

# 抗跌主力参数
WYCKOFF_BENCHMARK_CODE=000001
WYCKOFF_LOOKBACK_WINDOW=3
WYCKOFF_BENCH_DROP=-2.0
WYCKOFF_RS_THRESHOLD=2.0

# 突破临界参数
WYCKOFF_CONSOLIDATION_WINDOW=60
WYCKOFF_BOX_RANGE=0.25
WYCKOFF_SQUEEZE_WINDOW=5
WYCKOFF_SQUEEZE_AMPLITUDE=0.05
WYCKOFF_VOLUME_DRY=0.6
WYCKOFF_VOLUME_LONG=50

# 异常吸筹/出货参数
WYCKOFF_VOL_SPIKE=2.5
WYCKOFF_STALL_LIMIT=2.0
WYCKOFF_PANIC_FLOOR=-3.0
WYCKOFF_VOLUME_WINDOW=5

# 启动龙头参数
WYCKOFF_EXCLUDE_ST=true
WYCKOFF_EXCLUDE_NEW_DAYS=30
WYCKOFF_MIN_MARKET_CAP=200000
WYCKOFF_MAX_MARKET_CAP=10000000
WYCKOFF_LOOKBACK_LIMIT=10
WYCKOFF_BREAKOUT_WINDOW=60
